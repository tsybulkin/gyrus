<!DOCTYPE html>
<html>
<head>

    <meta charset="utf-8"/>
    <title>Board</title>

    <link rel="stylesheet" href="static/css/normalize.css">
    <link rel="stylesheet" href="static/css/pure-min.css">
    <link rel="stylesheet" href="static/css/board.css">
    <link rel="stylesheet" href="static/css/switch.css">

    <style type="text/css">

        html,body {
            height:100%;
        }

        .height_max,#main_view {
            height:100%;
        }



        .main {
            width: 85%;
            margin: 0 auto;
            padding: 0px;
            font-family: sans-serif;
            font-size: 20px;
        }

        .main .h {
        color: rgb(152,13,10);
        text-align: center;
        }
        .main h1 {
        font-size: 6vw;
        }
        .main h3 {
        font-size: 4vw;
        }

        .main p {
        text-indent: 1.5em;
        }

        .main div.text {
        /*margin: 10px 20px 15px 20px;*/
        }

        .main .box {
            margin: 5px;
            padding: 20px;
            background: linear-gradient(rgb(250,250,250), rgb(191,191,191));
            border-radius: 5px;
            height:90%;
        }

        .button-easy,
        .button-medium,
        .button-hard,
        .button-move {
        color: white;
        border-radius: 10px;
        text-shadow: 0 1px 1px rgba(0, 0, 0, 0.2);
        font-size: 25px;
        width: 80%;
        height: 70px;
        margin-bottom: 15px;
        display: block;
        }
        .button-easy,
        .button-move{
        background: rgb(48, 152, 80);
        }
        .button-medium {
        background: rgb(197, 150, 55);
        }
        .button-hard {
        background: rgb(193, 89, 34);
        }

        .hidden {
            visibility: hidden;
        }
        .visible {
            visibility: visible;
        }

        .close_game_button {
            width: 48px;
            height: 48px;
            border: 0;

            background: url(static/img/close.png);
            background-size: 100% 100%;
            background-repeat: no-repeat;
        }

        .switch_container {
        margin-top: 20px;
        }



    </style>

</head>

<body>

<div id="main_view" class="visible">
    <div class="pure-g main height_max">
        <div class="pure-u-1-3 height_max">
            <div class="box" id="left_box">
                <h3 class="h">statistics</h3>

                <div class='text'>games played â€¨</div>
                <div class='text'>by bot: <span>0</span></div>
                <br/>

                <div class='text'>agains people:</div>
                <div class='text'>Win: <span>0</span></div>
                <div class='text'>Lost: <span>0</span></div>
                <div class='text'>Draw: <span>0</span></div>
            </div>

        </div>
        <div class="pure-u-1-3 height_max">
            <div class="box">
                <h1 class="h">gomoku</h1>

                <p>Play free-style Gomoku or five- in-a-row board game against AI-bot or watch how it plays against other
                    people.</p>

                <p>During each game the Bot learns new tricks, which it will use against you next time.</p>

                <p>Enjoy...</p>
            </div>
        </div>
        <div class="pure-u-1-3 height_max">
            <div class="box">
                <h3 class="h">new game</h3>
                <center>
                    <label class="switch_container"><input type="checkbox" id="color_check" class="ios-switch" checked /></label>

                    <button onclick="start_game('easy')" class="button-easy pure-button">easy</button>
                    <button onclick="start_game('medium')" class="button-medium pure-button">medium</button>
                    <button onclick="start_game('hard')" class="button-hard pure-button">hard</button>
                </center>
            </div>
        </div>
    </div>
</div>

<div id="game_view" class="hidden">

    <button onclick="close_game()" class="close_game_button"></button>
    <div class="pure-g main height_max">
        <div id="game_widget_container" class="pure-u-2-3 height_max">

        </div>
        <div class="pure-u-1-3 height_max">
            <!--<button onclick="make_move()" class="button-move pure-button">make move</button>-->
        </div>
    </div>

</div>


<script type="text/javascript" src="static/js/underscore-min.js"></script>
<script type="text/javascript" src="static/js/board.js"></script>
<script type="text/javascript">

    // iOS switch
    var switches = document.querySelectorAll('input[type="checkbox"].ios-switch');
    for (var i=0, sw; sw = switches[i++]; ) {
        var div = document.createElement('div');
        div.className = 'switch';
        sw.parentNode.insertBefore(div, sw.nextSibling);
    }

    var board = undefined;
    var connection = undefined;
    function start_game(level) {
        switch_views();
        var color = (document.getElementById("color_check").checked) ? 'blacks' : 'whites';
        var container = document.getElementById('game_widget_container');
        container.innerHTML = '';
        board = new Board(container, 30, function(x,y) {
            board.addChecker(x, y, color);
            board.thinking();
            connection.send(['player_move',x,y]);
        });
        if (color == 'blacks') {
            board.addChecker(8, 8, 'blacks');
            board.thinking();
        }

        connection = new BoardConnection(board, 'ws:/localhost:8080', color, level);
    }

    function close_game() {
        switch_views();
        connection.close();
    }

    function switch_views() {
        var main_view = document.getElementById('main_view');
        var game_view = document.getElementById('game_view');

        var tmpClassName = main_view.className;
        main_view.className = game_view.className;
        game_view.className = tmpClassName;
    }

    var b = new Board(document.getElementById('left_box'), 10);
</script>

</body>

</html>
